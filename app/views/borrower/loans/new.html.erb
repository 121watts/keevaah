<div class="page-border">
  <div class="page-header">
    <h1>New loan</h1>
  </div>
  <% if @loan.errors.any? %>
    <div id="error-explanation">
      <h2><%= pluralize(@loan.errors.count, "error") %> prohibited this loan from being saved:</h2>

      <ul>
        <% @loan.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <%= form_for @loan, url: borrower_loans_path, method: :post do |f| %>
    <%= f.label       :title %><br/>
    <%= f.text_field  :title %><br/>

    <%= f.label       :description %><br/>
    <%= f.text_field  :description %><br/>

    <%= f.label             :loan_category %><br/>
    <%= f.collection_select :categories, Category.all, :id, :name, include_blank: true  %><br/>

    <%= f.label       :amount %><br/>
    <%= f.text_field  :amount %><br/>

    <%= f.label       :requested_by %><br/>
    <%= f.date_field  :requested_by %><br/>

    <%= f.label       :repayments_begin %><br/>
    <%= f.date_field  :repayments_begin %><br/>

    <%= f.label       :monthly_payment %><br/>
    <%= f.text_field  :monthly_payment %><br/>
    <span id="minimum-monthly-payment"></span></br>
    <span id="suggested-monthly-payment"></span></br>

    <%= f.label       :image %><br/>
    <%= f.file_field  :image %><br/>
    <div class="form-actions">
      <%= f.submit "Create loan", class: "btn btn-primary" %>
      <%= link_to 'Cancel', borrower_loans_path, :class => 'btn btn-danger' %>
    </div>
  <% end %>
  <script src="http://code.jquery.com/jquery-1.5.js"></script>
    <script>
      $(document).ready(function(){
        var amountBox    = $('#loan_amount') // Textarea input box
        var totalAmount  = $('#loan_amount').value; //Total characters allowed in textarea
        var MinAmountBox    = $('#minimum-monthly-payment'); // Remaining chars count will be displayed here
        var SugAmountBox    = $('#suggested-monthly-payment'); // Remaining chars count will be displayed here

        amountBox.keyup(function() { //user releases a key on the keyboard

            var thisAmount = this.value; //get chars count in textarea

            var value = thisAmount * .16;
            var min = thisAmount * .08;
            SugAmountBox.text('Suggested Monthly Payment: $' + value); //count remaining chars
            MinAmountBox.text('Minimum Monthly Payment: $' + min); //count remaining chars
        });
    });
  </script>
</div>
